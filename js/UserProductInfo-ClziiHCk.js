import{u as m}from"./userProductStore-CF3CjVKU.js";import{f as A}from"./favoriteStore-CPjCsCYH.js";import{c as f}from"./userCartStore-CEq2uRuA.js";import{m as n,a as g}from"./pinia-D1tb24LR.js";import{B as k}from"./BtnFavorite-yP4RYGDH.js";import{P as x}from"./ProductCard-Cdcu3Kr7.js";import{B as T}from"./BtnSeeMore-DWmRrmNc.js";import{a_ as u,aR as c,a5 as l,a6 as o,L as p,aY as _,a4 as d,a3 as C,ac as S,bC as B,aG as N,ae as v,bx as b,ba as R}from"./@vue-Cqo5QHyB.js";import{_ as E}from"./index-CuXpO5cQ.js";import"./axios-Di5RpEPX.js";import"./sweetalert2-WZH64N0g.js";import"./@ckeditor-DVmmUNiu.js";import"./vue-rznDyWWg.js";import"./vue-loading-overlay-DxSJf-C0.js";import"./statusStore-bNOcWQBU.js";import"./vue-axios-BaogFJPH.js";import"./vue-sweetalert2-BkTfjfvc.js";import"./vee-validate-CasJ09EL.js";import"./@vee-validate-DziBkgPq.js";import"./bootstrap-fL-MoaV8.js";import"./@popperjs-WhmJkuoZ.js";/* empty css                        */import"./aos-BIKR1xpe.js";import"./vue-router-DOL1scXn.js";var V={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/test/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:L,VITE_PATH:F}=V,U={data(){return{currentProductId:null,product:{},qty:1,tempRelatedAllProducts:[],relatedProducts:[],artistInfo:{},quantityInCart:""}},watch:{cartsList(){this.getAvailableProductNum(this.currentProductId)},$route(){this.initPageInfo()}},methods:{...n(m,["getAllProducts"]),...n(f,["addToCart","getCartsList"]),...n(A,["recentlyViewed"]),changeImage(t){this.product.currentImage=this.product.imagesStock[t]},getCurrentProduct(t){const r=`${L}/api/${F}/product/${t}`;return this.axios.get(r).then(s=>{const i=s.data.product;return this.product={productInfo:i,currentImage:i.imageUrl},i.imagesUrl&&(this.product.imagesStock=[i.imageUrl,...i.imagesUrl]),this.recentlyViewed(i),i.artist}).catch(s=>console.log(s.response.data.message))},getRelatedProducts(t,r){this.tempRelatedAllProducts=this.sortNewest.newestProduct.filter(s=>s.artist===t&&s.id!==r),this.tempRelatedAllProducts.length||(this.tempRelatedAllProducts=this.sortNewest.newestProduct.filter(s=>s.group===this.product.productInfo.group)),this.relatedProducts=this.tempRelatedAllProducts.slice(0,3)},getArtistInfo(t){this.artistInfo=this.sortNewest.newestArtist.filter(r=>r.title===t)[0]},getAvailableProductNum(t){const r=this.cartsList.carts.filter(s=>s.product_id===t);this.quantityInCart=r.length?r[0].qty:0},async initPageInfo(){try{this.currentProductId=this.$route.params.id;const t=await this.getCurrentProduct(this.currentProductId);await this.getAllProducts(),this.getCartsList(),this.getAvailableProductNum(this.currentProductId),this.getRelatedProducts(t,this.currentProductId),this.getArtistInfo(t)}catch(t){throw console.log("錯誤:",t),t}}},mounted(){this.initPageInfo()},computed:{...g(m,["sortNewest"]),...g(f,["cartsList"])},components:{ProductCard:x,BtnSeeMore:T,BtnFavorite:k}},D={key:0,class:"container user-page-container"},M={class:"row g-1 g-lg-6"},O={class:"col-12 col-md-8"},j={class:"row"},q={class:"position-relative col-12 col-lg-3"},H={class:"bg-tertiary h-100 overflow-hidden"},z={key:0,class:"position-lg-absolute row px-2 py-2 py-lg-0 px-lg-auto flex-nowrap flex-lg-column overflow-auto scrollbar-y-hide w-lg-100 h-lg-100"},G=["onClick"],Y=["src"],$={class:"col-12 col-lg-9 order-first order-lg-last flex-shrink-0 content"},J={class:"bg-tertiary ratio-1x1 overflow-hidden"},K=["src","alt"],Q=S('<div class="accordion accordion-flush" id="accordionFlushExample"><div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne"> Accordion Item #1 </button></h2><div id="flush-collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample"><div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the first item&#39;s accordion body.</div></div></div><div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo"> Accordion Item #2 </button></h2><div id="flush-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample"><div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the second item&#39;s accordion body. Let&#39;s imagine this being filled with some actual content.</div></div></div><div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree"> Accordion Item #3 </button></h2><div id="flush-collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionFlushExample"><div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the third item&#39;s accordion body. Nothing more exciting happening here in terms of content, but just filling up the space to make it look, at least at first glance, a bit more representative of how this would look in a real-world application.</div></div></div></div>',1),W={key:1,class:"container"},X={class:"py-7 py-md-9"},Z={class:"d-flex justify-content-between align-items-center mb-7 mb-md-8"},tt=o("h2",{class:"fs-2 fs-md-1"},"相似作品",-1),ot={class:"row g-3 g-md-8"},et={class:"fs-info fs-md-6 text-info"};function st(t,r,s,i,e,P){const I=u("BtnSeeMore"),w=u("BtnFavorite"),y=u("ProductCard");return c(),l(p,null,[e.product.productInfo?(c(),l("div",D,[o("div",M,[o("div",O,[o("div",j,[o("div",q,[o("div",H,[e.product.imagesStock?(c(),l("div",z,[(c(!0),l(p,null,_(e.product.imagesStock,(a,h)=>(c(),l("a",{href:"#",class:"col-3 col-lg-12 py-0 py-lg-2 overflow-hidden",key:"img"+h,onClick:B(rt=>P.changeImage(h),["prevent"])},[o("img",{src:a,alt:"product",class:N(["object-fit-contain w-100 h-100",a===e.product.currentImage?"border border-2 border-info":""])},null,10,Y)],8,G))),128))])):d("",!0)])]),o("div",$,[o("div",J,[o("img",{src:e.product.currentImage,alt:e.product.productInfo.title,class:"object-fit-contain w-100 h-100"},null,8,K)])])])]),Q])])):d("",!0),e.relatedProducts.length?(c(),l("div",W,[o("div",X,[o("div",Z,[tt,e.tempRelatedAllProducts?(c(),C(I,{key:0,linkTo:e.tempRelatedAllProducts.length?`/productlist?artist=${e.artistInfo.title}`:`/productlist?group=${e.product.productInfo.group}`},null,8,["linkTo"])):d("",!0)]),o("div",ot,[(c(!0),l(p,null,_(e.relatedProducts,a=>(c(),l("div",{class:"col-6 col-md-4",key:a.id},[v(y,{item:a,linkTo:`/productInfo/${a.id}`},{price:b(()=>[o("p",et,"NT$ "+R(a.price.toLocaleString()),1)]),favorite:b(()=>[v(w,{productId:a.id},null,8,["productId"])]),_:2},1032,["item","linkTo"])]))),128))])])])):d("",!0)],64)}const St=E(U,[["render",st]]);export{St as default};
