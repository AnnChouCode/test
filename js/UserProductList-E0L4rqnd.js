import{u as y}from"./userProductStore-D49mHi_z.js";import{m as S,a as C}from"./pinia-Cz9d2yny.js";import{P,B as N}from"./ProductCard-BS_bJPdT.js";import{O as z}from"./bootstrap-DYHJktcF.js";import{aR as n,a5 as l,a6 as t,aG as d,bC as u,L as p,aY as h,ba as b,a4 as m,a_ as _,ae as v,ad as R,a3 as F,bx as x}from"./@vue-Cqo5QHyB.js";import{_ as w}from"./index-DqUkzexz.js";import"./axios-Di5RpEPX.js";import"./sweetalert2-WZH64N0g.js";import"./@ckeditor-DVmmUNiu.js";import"./vue-rznDyWWg.js";import"./vue-loading-overlay-DxSJf-C0.js";import"./@popperjs-WhmJkuoZ.js";import"./vue-axios-BaogFJPH.js";import"./vue-sweetalert2-BkTfjfvc.js";import"./vee-validate-CasJ09EL.js";import"./@vee-validate-DziBkgPq.js";/* empty css                        */import"./aos-BIKR1xpe.js";import"./vue-router-DOL1scXn.js";const T={data(){return{filterRules:{},mobileNav:null}},props:["allArtists","groupList","productSizeList"],methods:{filterShow(a){if(a){const[s,r]=a;this.filterRules[s]=r,this.filterRules.current_page=1;const c=`${Object.entries(this.filterRules).map(i=>i.join("=")).join("&")}`;this.$router.push(`/productList?${c}`);return}this.filterRules={},this.$router.push("/productList")},openMobileNav(){this.mobileNav.show()},closeMobileNav(){this.mobileNav.hide()}},mounted(){this.mobileNav=new z(this.$refs.mobileNav),this.filterRules=JSON.parse(JSON.stringify(this.$route.query)),delete this.filterRules.current_page}},A={class:"fixed-top z-1 bg-tertiary nav-product-filter w-100"},j={class:"container"},G={class:"d-none d-lg-flex align-items-center"},$={class:"d-flex align-items-center list-unstyled"},H={class:"dropdown"},O=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),B={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},q={class:"dropdown"},I=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnSizeFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"尺寸"),t("i",{class:"bi bi-chevron-down"})],-1),M={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnSizeFilter"},E=["onClick"],U={class:"dropdown"},V=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnGroupFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"題材"),t("i",{class:"bi bi-chevron-down"})],-1),D={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnGroupFilter"},J=["onClick"],W={class:"dropdown"},Y=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnArtistFilter","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"藝術家"),t("i",{class:"bi bi-chevron-down"})],-1),K={class:"dropdown-menu p-0 overflow-y-scroll rounded-0 dropdown-scrollbar","aria-labelledby":"btnArtistFilter"},Q=["onClick"],X={class:"d-flex d-lg-none align-items-center justify-content-between"},Z={class:"d-flex align-items-center list-unstyled"},tt={class:"dropdown"},et=t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0",id:"btnProductSort","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("span",{class:"me-3"},"排序"),t("i",{class:"bi bi-chevron-down"})],-1),st={class:"dropdown-menu p-0 rounded-0","aria-labelledby":"btnProductSort"},ot=t("span",{class:"me-3"},"篩選",-1),it=t("i",{class:"bi bi-chevron-down"},null,-1),nt=[ot,it],lt={class:"offcanvas offcanvas-start bg-primary",tabindex:"-1",id:"offcanvasNav","aria-labelledby":"offcanvasNavLabel",ref:"mobileNav"},rt=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasNavLabel"},"WANDERER LAND"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),at={class:"offcanvas-body"},ct={class:"d-flex flex-column gap-3 gap-sm-5 list-unstyled accordion accordion-flush",id:"accordionFlushFilter"},dt={class:"accordion-item bg-transparent"},ut=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseSize","aria-expanded":"false","aria-controls":"flush-collapseSize"}," 尺寸 ")],-1),pt={id:"flush-collapseSize",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushSize"},ft={class:"accordion-body px-0 py-0"},ht={class:"list-unstyled","aria-labelledby":"btnSizeFilter"},bt=["onClick"],gt={class:"accordion-item bg-transparent"},_t=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseGroup","aria-expanded":"false","aria-controls":"flush-collapseGroup"}," 題材 ")],-1),mt={id:"flush-collapseGroup",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushGroup"},vt={class:"accordion-body px-0 py-0"},wt={class:"list-unstyled","aria-labelledby":"btnGroupFilter"},yt=["onClick"],xt={class:"accordion-item bg-transparent"},kt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed px-0 text-default bg-transparent",type:"button","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseArtist","aria-expanded":"false","aria-controls":"flush-collapseArtist"}," 藝術家 ")],-1),Lt={id:"flush-collapseArtist",class:"accordion-collapse collapse","data-bs-parent":"#accordionFlushArtist"},St={class:"accordion-body px-0 py-0"},Ct={class:"list-unstyled","aria-labelledby":"btnArtistFilter"},Pt=["onClick"],Nt={class:"position-absolute start-0 bottom-0 bg-primary p-4 w-100"};function zt(a,s,r,c,i,o){return n(),l(p,null,[t("nav",A,[t("div",j,[t("div",G,[t("ul",$,[t("li",null,[t("div",H,[O,t("ul",B,[t("li",null,[t("a",{class:d(["dropdown-item p-3",i.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:s[0]||(s[0]=u(e=>o.filterShow(["sort","newest"]),["prevent"]))},"最新作品",2)]),t("li",null,[t("a",{class:d(["dropdown-item p-3",i.filterRules.sort==="priceHighToLow"?"bg-secondary":""]),href:"#",onClick:s[1]||(s[1]=u(e=>o.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低",2)]),t("li",null,[t("a",{class:d(["dropdown-item p-3",i.filterRules.sort==="priceLowToHigh"?"bg-secondary":""]),href:"#",onClick:s[2]||(s[2]=u(e=>o.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高",2)])])])]),t("li",null,[t("div",q,[I,t("ul",M,[(n(!0),l(p,null,h(r.productSizeList,e=>(n(),l("li",{key:e},[t("a",{class:d(["dropdown-item p-3",i.filterRules.size===e?"bg-secondary":""]),href:"#",onClick:u(f=>o.filterShow(["size",e]),["prevent"])},b(e),11,E)]))),128))])])]),t("li",null,[t("div",U,[V,t("ul",D,[(n(!0),l(p,null,h(r.groupList.productGroupList,e=>(n(),l("li",{key:e},[t("a",{class:d(["dropdown-item p-3",i.filterRules.group===e?"bg-secondary":""]),href:"#",onClick:u(f=>o.filterShow(["group",e]),["prevent"])},b(e),11,J)]))),128))])])]),t("li",null,[t("div",W,[Y,t("ul",K,[(n(!0),l(p,null,h(r.allArtists,e=>(n(),l("li",{key:e.id},[t("a",{class:d(["dropdown-item p-3",i.filterRules.artist===e.title?"bg-secondary":""]),href:"#",onClick:u(f=>o.filterShow(["artist",e.title]),["prevent"])},b(e.title),11,Q)]))),128))])])])]),Object.keys(i.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:s[3]||(s[3]=e=>o.filterShow())},"清空篩選")):m("",!0)]),t("div",X,[t("ul",Z,[t("li",null,[t("div",tt,[et,t("ul",st,[t("li",null,[t("a",{class:d(["dropdown-item p-3",i.filterRules.sort==="newest"?"bg-secondary":""]),href:"#",onClick:s[4]||(s[4]=u(e=>o.filterShow(["sort","newest"]),["prevent"]))},"最新作品",2)]),t("li",null,[t("a",{class:d(["dropdown-item p-3",i.filterRules.sort==="priceHighToLow"?"bg-secondary":""]),href:"#",onClick:s[5]||(s[5]=u(e=>o.filterShow(["sort","priceHighToLow"]),["prevent"]))},"價格：高至低",2)]),t("li",null,[t("a",{class:d(["dropdown-item p-3",i.filterRules.sort==="priceLowToHigh"?"bg-secondary":""]),href:"#",onClick:s[6]||(s[6]=u(e=>o.filterShow(["sort","priceLowToHigh"]),["prevent"]))},"價格：低至高",2)])])])]),t("li",null,[t("button",{type:"button",class:"btn d-flex align-items-center px-5 py-4 text-default fs-info border-0","aria-controls":"offcanvasFilterNav",onClick:s[7]||(s[7]=(...e)=>o.openMobileNav&&o.openMobileNav(...e))},nt)])]),Object.keys(i.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info",type:"button",onClick:s[8]||(s[8]=e=>o.filterShow())},"清空篩選")):m("",!0)])])]),t("div",lt,[rt,t("div",at,[t("ul",ct,[t("li",dt,[ut,t("div",pt,[t("div",ft,[t("ul",ht,[(n(!0),l(p,null,h(r.productSizeList,e=>(n(),l("li",{key:e},[t("a",{class:d(["d-block p-3 text-info",i.filterRules.size===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>o.filterShow(["size",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},b(e),11,bt)]))),128))])])])]),t("li",gt,[_t,t("div",mt,[t("div",vt,[t("ul",wt,[(n(!0),l(p,null,h(r.groupList.productGroupList,e=>(n(),l("li",{key:e},[t("a",{class:d(["d-block p-3 text-info",i.filterRules.group===e?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>o.filterShow(["group",e]),["prevent"]),"data-bs-dismiss":"offcanvas"},b(e),11,yt)]))),128))])])])]),t("li",xt,[kt,t("div",Lt,[t("div",St,[t("ul",Ct,[(n(!0),l(p,null,h(r.allArtists,e=>(n(),l("li",{key:e.id},[t("a",{class:d(["d-block p-3 text-info",i.filterRules.artist===e.title?"fw-bold text-decoration-underline":""]),href:"#",onClick:u(f=>o.filterShow(["artist",e.title]),["prevent"]),"data-bs-dismiss":"offcanvas"},b(e.title),11,Pt)]))),128))])])])])])]),t("div",Nt,[Object.keys(i.filterRules).length?(n(),l("button",{key:0,class:"btn btn-outline-default rounded-0 fs-info w-100",type:"button",onClick:s[9]||(s[9]=e=>o.filterShow())},"清空篩選")):m("",!0)])],512)],64)}const Rt=w(T,[["render",zt]]),Ft={props:["pagination"],methods:{getList(a){this.$emit("getList",a)}}},Tt={"aria-label":"Page navigation",class:"d-flex justify-content-end"},At={class:"pagination"},jt=t("span",{"aria-hidden":"true"},"«",-1),Gt=[jt],$t=["onClick"],Ht=t("span",{"aria-hidden":"true"},"»",-1),Ot=[Ht];function Bt(a,s,r,c,i,o){return n(),l("nav",Tt,[t("ul",At,[t("li",{class:d(["page-item",{disabled:!r.pagination.has_pre}])},[t("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:s[0]||(s[0]=u(e=>o.getList(r.pagination.current_page-1),["prevent"]))},Gt)],2),(n(!0),l(p,null,h(r.pagination.total_pages,e=>(n(),l("li",{class:d(["page-item",{active:e===r.pagination.current_page}]),key:e},[t("a",{href:"#",class:"page-link",onClick:u(f=>o.getList(e),["prevent"])},b(e),9,$t)],2))),128)),t("li",{class:d(["page-item",{disabled:!r.pagination.has_next}])},[t("a",{class:"page-link",href:"#","aria-label":"Next",onClick:s[1]||(s[1]=u(e=>o.getList(r.pagination.current_page+1),["prevent"]))},Ot)],2)])])}const qt=w(Ft,[["render",Bt]]),It={data(){return{productsList:[],tempProductsList:[],pagination:{pageSize:12,total_pages:1,current_page:1},screenWidth:null}},methods:{...S(y,["getAllProducts","getSizeList"]),filterShow(a){const{sort:s,...r}=a;let c=this.sortNewest.newestProduct;Object.entries(r).forEach(([i,o])=>{o!==void 0&&(c=c.filter(e=>e[i]===o))}),s==="newest"?c=c.sort((i,o)=>o.create_at-i.create_at):s==="priceHighToLow"?c=c.sort((i,o)=>o.price-i.price):s==="priceLowToHigh"&&(c=c.sort((i,o)=>i.price-o.price)),this.productsList=c,this.getList()},getPaginationInfo(){this.pagination.total_pages=Math.ceil(this.productsList.length/this.pagination.pageSize),this.pagination.has_pre=this.pagination.current_page!==1,this.pagination.has_next=this.pagination.total_pages>this.pagination.current_page},getList(a=this.pagination.current_page){this.pagination.current_page=a,this.getPaginationInfo();const s=(a-1)*this.pagination.pageSize,r=s+this.pagination.pageSize;this.tempProductsList=this.productsList.slice(s,r);const c={...this.$route.query};c.current_page=a;const i=Object.entries(c).map(o=>o.join("=")).join("&");this.$router.push(`productlist?${i}`),this.backToTop()},backToTop(){document.body.scrollTop=0,document.documentElement.scrollTop=0},initPageContent(){this.pagination.current_page=+this.$route.query.current_page||1;const a={sort:this.$route.query.sort,artist:this.$route.query.artist,group:this.$route.query.group,size:this.$route.query.size};this.filterShow(a)}},watch:{$route(){this.initPageContent()}},async mounted(){await this.getAllProducts(),this.initPageContent(),this.getSizeList()},computed:{...C(y,["allArtists","sortNewest","groupList","productSizeList"])},components:{UserNavProductFilter:Rt,ProductCard:P,PaginationComponent:qt,BtnFavorite:N}},Mt={class:"container user-product-page-container flex-grow-1"},Et=t("h2",{class:"mb-7 mb-md-8 h1 lh-sm title-letter-spacing text-center h1"},"作品",-1),Ut={key:0,class:"text-center fs-4"},Vt=t("span",{class:"d-block d-md-inline"},"請「清空篩選」重新選取",-1),Dt={key:1,class:"row g-3 g-md-8 mb-5"},Jt={class:"fs-info fs-md-6 text-info"};function Wt(a,s,r,c,i,o){const e=_("UserNavProductFilter"),f=_("BtnFavorite"),k=_("ProductCard"),L=_("PaginationComponent");return n(),l(p,null,[v(e,{allArtists:a.allArtists,groupList:a.groupList,productSizeList:a.productSizeList,onFilterShow:o.filterShow},null,8,["allArtists","groupList","productSizeList","onFilterShow"]),t("div",Mt,[Et,i.tempProductsList.length?(n(),l("div",Dt,[(n(!0),l(p,null,h(i.tempProductsList,g=>(n(),l("div",{class:"col-6 col-md-4",key:g.id},[v(k,{item:g,linkTo:`/productInfo/${g.id}`},{price:x(()=>[t("p",Jt,"NT$ "+b(g.price.toLocaleString()),1)]),favorite:x(()=>[v(f,{productId:g.id},null,8,["productId"])]),_:2},1032,["item","linkTo"])]))),128))])):(n(),l("p",Ut,[R("沒有對應的作品，"),Vt])),i.tempProductsList.length?(n(),F(L,{key:2,pagination:i.pagination,onGetList:o.getList},null,8,["pagination","onGetList"])):m("",!0)])],64)}const he=w(It,[["render",Wt]]);export{he as default};
