import{u as m,c as g,f as A}from"./userProductStore-D49mHi_z.js";import{m as n,a as f}from"./pinia-Cz9d2yny.js";import{P as T,B as k}from"./ProductCard-BS_bJPdT.js";import{B as x}from"./BtnSeeMore-95L_MsaC.js";import{a_ as u,aR as c,a5 as l,a6 as o,L as h,aY as _,a4 as d,a3 as C,ac as S,bC as B,aG as N,ae as v,bx as b,ba as R}from"./@vue-Cqo5QHyB.js";import{_ as E}from"./index-DqUkzexz.js";import"./axios-Di5RpEPX.js";import"./sweetalert2-WZH64N0g.js";import"./@ckeditor-DVmmUNiu.js";import"./vue-rznDyWWg.js";import"./vue-loading-overlay-DxSJf-C0.js";import"./vue-axios-BaogFJPH.js";import"./vue-sweetalert2-BkTfjfvc.js";import"./vee-validate-CasJ09EL.js";import"./@vee-validate-DziBkgPq.js";import"./bootstrap-DYHJktcF.js";import"./@popperjs-WhmJkuoZ.js";/* empty css                        */import"./aos-BIKR1xpe.js";import"./vue-router-DOL1scXn.js";var V={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"wandererland",BASE_URL:"/test/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API:L,VITE_PATH:F}=V,O={data(){return{currentProductId:null,product:{},qty:1,tempRelatedAllProducts:[],relatedProducts:[],artistInfo:{},quantityInCart:""}},watch:{cartsList(){this.getAvailableProductNum(this.currentProductId)},$route(){this.initPageInfo()}},methods:{...n(m,["getAllProducts"]),...n(g,["addToCart","getCartsList"]),...n(A,["recentlyViewed"]),changeImage(t){this.product.currentImage=this.product.imagesStock[t]},getCurrentProduct(t){const r=`${L}/api/${F}/product/${t}`;return this.axios.get(r).then(s=>{const a=s.data.product;return this.product={productInfo:a,currentImage:a.imageUrl},a.imagesUrl&&(this.product.imagesStock=[a.imageUrl,...a.imagesUrl]),this.recentlyViewed(a),a.artist}).catch(s=>console.log(s.response.data.message))},getRelatedProducts(t,r){this.tempRelatedAllProducts=this.sortNewest.newestProduct.filter(s=>s.artist===t&&s.id!==r),this.tempRelatedAllProducts.length||(this.tempRelatedAllProducts=this.sortNewest.newestProduct.filter(s=>s.group===this.product.productInfo.group)),this.relatedProducts=this.tempRelatedAllProducts.slice(0,3)},getArtistInfo(t){this.artistInfo=this.sortNewest.newestArtist.filter(r=>r.title===t)[0]},getAvailableProductNum(t){const r=this.cartsList.carts.filter(s=>s.product_id===t);this.quantityInCart=r.length?r[0].qty:0},async initPageInfo(){try{this.currentProductId=this.$route.params.id;const t=await this.getCurrentProduct(this.currentProductId);await this.getAllProducts(),this.getCartsList(),this.getAvailableProductNum(this.currentProductId),this.getRelatedProducts(t,this.currentProductId),this.getArtistInfo(t)}catch(t){throw console.log("錯誤:",t),t}}},mounted(){this.initPageInfo()},computed:{...f(m,["sortNewest"]),...f(g,["cartsList"])},components:{ProductCard:T,BtnSeeMore:x,BtnFavorite:k}},U={key:0,class:"container user-page-container"},D={class:"row g-1 g-lg-6"},M={class:"col-12 col-md-8"},j={class:"row"},q={class:"position-relative col-12 col-lg-3"},H={class:"bg-tertiary h-100 overflow-hidden"},z={key:0,class:"position-lg-absolute row px-2 py-2 py-lg-0 px-lg-auto flex-nowrap flex-lg-column overflow-auto scrollbar-y-hide w-lg-100 h-lg-100"},G=["onClick"],Y=["src"],$={class:"col-12 col-lg-9 order-first order-lg-last flex-shrink-0 content"},J={class:"bg-tertiary ratio-1x1 overflow-hidden"},K=["src","alt"],Q=S('<div><section class="bg-primary text-white py-md-8 py-7"><div class="accordion accordion-flush" id="accordionFlushExample"><div class="accordion-item"><h2 class="accordion-header" id="flush-headingOne"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne"> Accordion Item #1 </button></h2><div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample"><div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the first item&#39;s accordion body.</div></div></div><div class="accordion-item"><h2 class="accordion-header" id="flush-headingTwo"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo"> Accordion Item #2 </button></h2><div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample"><div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the second item&#39;s accordion body. Let&#39;s imagine this being filled with some actual content.</div></div></div><div class="accordion-item"><h2 class="accordion-header" id="flush-headingThree"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree"> Accordion Item #3 </button></h2><div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample"><div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the third item&#39;s accordion body. Nothing more exciting happening here in terms of content, but just filling up the space to make it look, at least at first glance, a bit more representative of how this would look in a real-world application.</div></div></div></div></section></div>',1),W={key:1,class:"container"},X={class:"py-7 py-md-9"},Z={class:"d-flex justify-content-between align-items-center mb-7 mb-md-8"},tt=o("h2",{class:"fs-2 fs-md-1"},"相似作品",-1),ot={class:"row g-3 g-md-8"},et={class:"fs-info fs-md-6 text-info"};function st(t,r,s,a,e,P){const w=u("BtnSeeMore"),I=u("BtnFavorite"),y=u("ProductCard");return c(),l(h,null,[e.product.productInfo?(c(),l("div",U,[o("div",D,[o("div",M,[o("div",j,[o("div",q,[o("div",H,[e.product.imagesStock?(c(),l("div",z,[(c(!0),l(h,null,_(e.product.imagesStock,(i,p)=>(c(),l("a",{href:"#",class:"col-3 col-lg-12 py-0 py-lg-2 overflow-hidden",key:"img"+p,onClick:B(rt=>P.changeImage(p),["prevent"])},[o("img",{src:i,alt:"product",class:N(["object-fit-contain w-100 h-100",i===e.product.currentImage?"border border-2 border-info":""])},null,10,Y)],8,G))),128))])):d("",!0)])]),o("div",$,[o("div",J,[o("img",{src:e.product.currentImage,alt:e.product.productInfo.title,class:"object-fit-contain w-100 h-100"},null,8,K)])])])]),Q])])):d("",!0),e.relatedProducts.length?(c(),l("div",W,[o("div",X,[o("div",Z,[tt,e.tempRelatedAllProducts?(c(),C(w,{key:0,linkTo:e.tempRelatedAllProducts.length?`/productlist?artist=${e.artistInfo.title}`:`/productlist?group=${e.product.productInfo.group}`},null,8,["linkTo"])):d("",!0)]),o("div",ot,[(c(!0),l(h,null,_(e.relatedProducts,i=>(c(),l("div",{class:"col-6 col-md-4",key:i.id},[v(y,{item:i,linkTo:`/productInfo/${i.id}`},{price:b(()=>[o("p",et,"NT$ "+R(i.price.toLocaleString()),1)]),favorite:b(()=>[v(I,{productId:i.id},null,8,["productId"])]),_:2},1032,["item","linkTo"])]))),128))])])])):d("",!0)],64)}const Tt=E(O,[["render",st]]);export{Tt as default};
